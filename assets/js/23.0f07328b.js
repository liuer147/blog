(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{434:function(e,t,r){e.exports=r.p+"assets/img/1688538422871-0d54f95a-da92-45b8-a740-3f5e6562bd2b.28f18a2b.png"},491:function(e,t,r){"use strict";r.r(t);var s=r(2),a=Object(s.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("webpack 中提供了在使用"),t("code",[e._v("import()")]),e._v("时便捷使用"),t("code",[e._v("prefetch")]),e._v("、"),t("code",[e._v("preload")]),e._v("的魔法注释。")]),e._v(" "),t("blockquote",[t("p",[e._v("参考："),t("a",{attrs:{href:"https://www.webpackjs.com/guides/code-splitting/#prefetchingpreloading-modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://www.webpackjs.com/guides/code-splitting/#prefetchingpreloading-modules"),t("OutboundLink")],1)])]),e._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// prefetch")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/* webpackPrefetch: true */")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'xxx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// preload")]),e._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/* webpackPreload: true */")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'xxx'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br"),t("span",{staticClass:"line-number"},[e._v("4")]),t("br"),t("span",{staticClass:"line-number"},[e._v("5")]),t("br")])]),t("h3",{attrs:{id:"认识prefetch-preload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#认识prefetch-preload"}},[e._v("#")]),e._v(" 认识prefetch，preload")]),e._v(" "),t("p",[e._v("webpack 中 prefetch、preload 的底层都是借助"),t("code",[e._v("<link>")]),e._v("对应的选项来完成的。")]),e._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("link rel"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'prefetch'")]),e._v(" href"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'xxx.js'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("<")]),e._v("link rel"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'preload'")]),e._v(" href"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'xxx.css'")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("as")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[e._v("'style'")]),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v("\n")])]),e._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[e._v("1")]),t("br"),t("span",{staticClass:"line-number"},[e._v("2")]),t("br"),t("span",{staticClass:"line-number"},[e._v("3")]),t("br")])]),t("h4",{attrs:{id:"prefetch"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#prefetch"}},[e._v("#")]),e._v(" prefetch")]),e._v(" "),t("blockquote",[t("p",[e._v("参考："),t("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Glossary/Prefetch",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.mozilla.org/zh-CN/docs/Glossary/Prefetch"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("prefetch 是 利用"),t("strong",[e._v("浏览器空闲时间")]),e._v("来下载用户在不久的将来可能访问的文档。网页向浏览器"),t("strong",[e._v("提供一组预期提示")]),e._v("，并在浏览器_"),t("strong",[e._v("完成当前页面的加载后（渲染完成之后）")]),e._v("_开始静默的下载并缓存指定的文档。当用户访问这些预期文档时，可以快速的从浏览器缓存中得到。\n"),t("strong",[e._v("浏览器会在空闲时间进行资源预加载时，如果空闲时间不足或预加载操作完成后，就应该立即停止加载操作，以避免影响用户的操作和网络请求。")]),e._v("\nprefetch 的目标资源加载优先级为"),t("code",[e._v("lowest")]),e._v("最低，这表示它会在其他网络/资源请求加载之后才会开始。\n资源正在预载时，用户点击了某个链接的话，预取将会被推迟到下载结束。\n需要注意的是，prefetch 仅仅只会下载并缓存目标资源，"),t("strong",[e._v("并不会执行")]),e._v("。")]),e._v(" "),t("h4",{attrs:{id:"preload"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#preload"}},[e._v("#")]),e._v(" preload")]),e._v(" "),t("blockquote",[t("p",[e._v("参考："),t("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload"),t("OutboundLink")],1)])]),e._v(" "),t("p",[e._v("preload 用户告诉浏览器在 页面生命周期的早期、浏览器的主要渲染机制启动之前开始加载。（立即加载资源）。\n简单来说，通过 preload 显示声明一个高优先级资源，强制浏览器提前请求资源，同时不阻塞文档正常 onload 。\n通常用于字体样式闪烁问题。具体参见参考第二条。")]),e._v(" "),t("blockquote",[t("p",[t("strong",[e._v("需要注意：")]),t("code",[e._v("**font**")]),e._v("**资源 和 **"),t("code",[e._v("**fetch**")]),t("strong",[e._v("预加载需要设置")]),t("code",[e._v("**crossorigin**")]),t("strong",[e._v("属性，否则资源会加载两次。")])])]),e._v(" "),t("h3",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),t("ul",[t("li",[t("code",[e._v("prefetch")]),e._v("、"),t("code",[e._v("preload")]),e._v("都只是下载资源，并适当的缓存。并不会执行资源中的代码。")]),e._v(" "),t("li",[t("code",[e._v("prefetch")]),e._v("、"),t("code",[e._v("preload")]),e._v("不会阻塞页面的 onload")]),e._v(" "),t("li",[t("code",[e._v("preload")]),e._v(" 仅适用于当前页面渲染必不可少的依赖的资源，且其请求时机存在问题。"),t("code",[e._v("prefetch")]),e._v("则是声明将来需要用到的资源。")]),e._v(" "),t("li",[t("code",[e._v("prefetch")]),e._v("、"),t("code",[e._v("preload")]),e._v("的缓存机制：")])]),e._v(" "),t("p",[t("img",{attrs:{src:r(434),alt:"image.png"}})]),e._v(" "),t("h3",{attrs:{id:"参考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[e._v("#")]),e._v(" 参考")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://juejin.cn/post/6844903562070196237",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://juejin.cn/post/6844903562070196237"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://juejin.cn/post/6893681741240909832",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://juejin.cn/post/6893681741240909832"),t("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);