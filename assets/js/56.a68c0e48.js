(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{567:function(t,e,a){"use strict";a.r(e);var n=a(2),s=Object(n.a)({},(function(){var t=this,e=t._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"概念"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概念"}},[t._v("#")]),t._v(" 概念")]),t._v(" "),e("p",[e("code",[t._v("window.requestAnimationFrame(cb)")]),t._v(" 用于告诉浏览器在下一次重绘之前执行回调"),e("code",[t._v("cb")]),t._v("。由于浏览器大概是每秒渲染 60 次，所以回调函数的执行次数通常也是每秒 60 次。")]),t._v(" "),e("h3",{attrs:{id:"注意事项"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[t._v("#")]),t._v(" 注意事项")]),t._v(" "),e("ol",[e("li",[t._v("回调函数"),e("code",[t._v("cb")]),t._v("会接收一个参数，表示当前回调"),e("code",[t._v("cb")]),t._v("被触发的时间（当前帧未来的某个时间点）。参数的形式类似"),e("code",[t._v("performance.now()")]),t._v("返回的格式。")]),t._v(" "),e("li",[t._v("如果需要在浏览器下一帧执行某个回调，只需要在"),e("code",[t._v("requestAnimationFrame")]),t._v("的回调"),e("code",[t._v("cb")]),t._v("中再次嵌套一个"),e("code",[t._v("requestAnimationFrame")])])]),t._v(" "),e("div",{staticClass:"language-javascript line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestAnimationframe")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    xxx\n\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[t._v("1")]),e("br"),e("span",{staticClass:"line-number"},[t._v("2")]),e("br"),e("span",{staticClass:"line-number"},[t._v("3")]),e("br"),e("span",{staticClass:"line-number"},[t._v("4")]),e("br"),e("span",{staticClass:"line-number"},[t._v("5")]),e("br")])]),e("ol",[e("li",[e("p",[t._v("为了提高性能和电池寿命，在大多数浏览器里，当"),e("code",[t._v("requestAnimationFrame()")]),t._v("运行在 "),e("em",[e("strong",[t._v("后台标签页")])]),t._v(" 或者 "),e("em",[e("strong",[t._v("隐藏的")])]),t._v(" "),e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/HTML/Element/iframe",target:"_blank",rel:"noopener noreferrer"}},[t._v("iframe"),e("OutboundLink")],1),t._v(" 里时，"),e("code",[t._v("requestAnimationFrame()")]),t._v("会被 **暂停调用 **以提升性能和电池寿命。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("requestAnimation")]),t._v(" 与"),e("code",[t._v("setTimeout")]),t._v("类似，会返回一个 ID，可以通过"),e("code",[t._v("window.cancelAnimationFrame(ID)")]),t._v("来取消回调函数执行。")])])]),t._v(" "),e("h3",{attrs:{id:"参考"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#参考"}},[t._v("#")]),t._v(" 参考")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/window/requestAnimationFrame",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/zh-CN/docs/Web/API/window/requestAnimationFrame"),e("OutboundLink")],1)]),t._v(" "),e("li",[t._v("《JavaScript 高级程序设计》requestAnimationframe")]),t._v(" "),e("li",[e("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Background_Tasks_API#%E7%A4%BA%E4%BE%8B",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://developer.mozilla.org/zh-CN/docs/Web/API/Background_Tasks_API#%E7%A4%BA%E4%BE%8B"),e("OutboundLink")],1)])])])}),[],!1,null,null,null);e.default=s.exports}}]);