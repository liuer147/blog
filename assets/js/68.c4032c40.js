(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{598:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("code",[s._v("sudo")]),s._v("权限，给普通用户授权以"),t("code",[s._v("root")]),s._v("身份执行命令。")]),s._v(" "),t("h3",{attrs:{id:"进行sudo授权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进行sudo授权"}},[s._v("#")]),s._v(" 进行"),t("code",[s._v("sudo")]),s._v("授权")]),s._v(" "),t("p",[t("code",[s._v("root")]),s._v("用户进行授权操作")]),s._v(" "),t("ul",[t("li",[s._v("授权命令通常格式："),t("code",[s._v("用户名\t ALL=(ALL) 命令")]),s._v(" "),t("ul",[t("li",[s._v("授权"),t("code",[s._v("test")]),s._v("用户所有权限："),t("code",[s._v("test ALL=(ALL) ALL")]),s._v(" -- 慎重授予")]),s._v(" "),t("li",[s._v("通常情况下，在使用"),t("code",[s._v("sudo")]),s._v("时，会提示输入当前用户密码，修改其不需要设置密码："),t("code",[s._v("test ALL=(ALL) NOPASSWD: ALL")])]),s._v(" "),t("li",[s._v("多个命令以"),t("code",[s._v(",")]),s._v("隔开："),t("code",[s._v("test ALL=(ALL) /bin/vi, /bin/rm")])]),s._v(" "),t("li",[s._v("授予排除部分命令"),t("code",[s._v("!")]),s._v("以外的所有命令："),t("code",[s._v("test ALL=(ALL) ALL, ! /bin/vi, ! /bin/rm")])])])])]),s._v(" "),t("blockquote",[t("p",[s._v("授权的命令：\nvisudo 编辑"),t("code",[s._v("sudo")]),s._v("命令  ->  相当于 "),t("code",[s._v("vi /etc/soduers")])]),s._v(" "),t("p",[s._v("不过 "),t("code",[s._v("visudo")]),s._v(" 在格式出错时会出现一些提示，而直接使用"),t("code",[s._v("vi")]),s._v("编辑，则没有")]),s._v(" "),t("p",[s._v("1、进入之后，执行"),t("code",[s._v("100gg")]),s._v("快速定位到"),t("code",[s._v("100")]),s._v("行，"),t("code",[s._v("root")]),s._v("授权命令所在区域\n2、添加命令，比如给"),t("code",[s._v("test")]),s._v("用户授权"),t("code",[s._v("root")]),s._v("身份的vi命令:"),t("code",[s._v("test \tALL=(ALL)\t/bin/vi")])])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liuer ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ visudo "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 会进入授权文件，添加指令  test \tALL=(ALL)\t/bin/vi 即可授权")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@liuer ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" /etc/sudoers\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" \t"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ALL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\t/bin/vi\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"进行测试、使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#进行测试、使用"}},[s._v("#")]),s._v(" 进行测试、使用")]),s._v(" "),t("ul",[t("li",[s._v("在对应命令前面加上"),t("code",[s._v("sudo")]),s._v("，即可以"),t("code",[s._v("root")]),s._v("身份执行对应命令")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test@liuer ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/passwd\n\nWe trust you have received the usual lecture from the "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" System\nAdministrator. It usually boils down to these three things:\n\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1) Respect the privacy of others.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2) Think before you type.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3) With great power comes great responsibility.")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("sudo"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" password "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" test:\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## 注释了最后一行")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("test@liuer ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-5")]),s._v(" /etc/passwd\nmysql:x:27:27:MySQL Server:/var/lib/mysql:/bin/false\ntest:x:1001:1001::/home/test:/bin/bash\ntest_2:x:1002:1002::/home/test_2:/sbin/nologin\ntest_3:x:989:985::/home/test_3:/bin/bash\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#test_4:x:988:984::/home/test_4:/sbin/nologin")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("ul",[t("li",[t("code",[s._v("sudo -l")]),s._v("：查看当前用户的权限")])]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("Matching Defaults entries "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" on liuer:\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("visiblepw, always_set_home, match_group_by_gid, always_query_group_plugin, env_reset, "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env_keep")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"COLORS DISPLAY\n    HOSTNAME HISTSIZE KDEDIR LS_COLORS"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env_keep")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"MAIL PS1 PS2 QTDIR USERNAME LANG LC_ADDRESS LC_CTYPE"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env_keep")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env_keep")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LC_MONETARY LC_NAME LC_NUMERIC\n    LC_PAPER LC_TELEPHONE"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("env_keep")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"LC_TIME LC_ALL LANGUAGE LINGUAS _XKB_CHARSET XAUTHORITY"')]),s._v(",\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("secure_path")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(":/bin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(":/usr/sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(":/usr/bin\n\nUser "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v(" may run the following commands on liuer:\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ALL"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" /bin/vi\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);